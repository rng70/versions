package resolver

import (
	"fmt"

	"github.com/rng70/versions/vars"
)

func NPMStyleTest() {
	npmTests := []string{
		"2.x",
		"3.3.x",
		"2.0.1",
		"~1.2",
		"~1.2.3",
		"1.0.0 - 2.9999.9999",
		">=1.0.2 <2.1.2",
		">1.0.2 <=2.3.4",
		"<1.0.0 || >=2.3.1 <2.4.5 || >=2.5.2 <3.0.0",
		"latest",
		"npm:pkg@1.0.0",
		"http://npmjs.com/example.tar.gz",
	}

	fmt.Println("=== NPM ===")
	for _, t := range npmTests {
		a := AnalyzeConstraint(vars.StyleNPM, t, vars.TestVersions)
		fmt.Printf("\nRAW: %q\nPARSED: %v\nMATCHES: %v\n", a.Raw, a.Parsed, a.Matches)
	}
}

func SpecialNPMStyleTest() {
	// Example: sorted matches for complex NPM example
	ex := AnalyzeConstraint(vars.StyleNPM, "<1.0.0 || >=2.3.1 <2.4.5 || >=2.5.2 <3.0.0", vars.TestVersions)
	// sort.Slice(ex.Matches, func(i, j int) bool { return cmpVersion(ex.Matches[i], ex.Matches[j]) < 0 })
	fmt.Println("\nSorted matches (NPM complex example):", ex.Matches)
}

func PythonStyleTestHelper() {
	pyTests := []string{
		"~=1.4",
		"==1.2.*",
		"==2.0.1",
		"~=1.2.3",
		">=1.0.2,<2.1.2",
		">1.0.2,<=2.3.4",
		"!=2.3.1,>=1.0.0,<3.0.0",
		"2.3.1",
		">=1.2.0.1",
	}

	fmt.Println("\n=== Python (requirements.txt style) ===")
	for _, t := range pyTests {
		a := AnalyzeConstraint(vars.StylePy, t, vars.TestVersions)
		fmt.Printf("\nRAW: %q\nPARSED: %v\nMATCHES: %v\n", a.Raw, a.Parsed, a.Matches)
	}
}

func NuGetStyleTest() {
	nugetTests := []string{
		"[1.0.0,2.0.0)",
		"(,2.4.5]",
		"[2.5.2,)",
		"[2.0.1]",
		"1.*",
		"1.2.*",
		"2.3.1",
	}

	fmt.Println("\n=== NuGet (C#) ===")
	for _, t := range nugetTests {
		a := AnalyzeConstraint(vars.StyleNuGet, t, vars.TestVersions)
		fmt.Printf("\nRAW: %q\nPARSED: %v\nMATCHES: %v\n", a.Raw, a.Parsed, a.Matches)
	}
}

func RandomTest() {
	npmConstraints := ">=19.0.0-next.0, <19.2.18"
	npmVersions := []string{
		"0.0.0-PLACEHOLDER",
		"17.0.0-rc.0",
		"17.0.0-rc.1",
		"17.0.0-rc.2",
		"17.0.0-rc.3",
		"17.0.0-rc.4",
		"17.0.0-rc.5",
		"17.0.0-next.0",
		"17.0.0-next.1",
		"17.0.0-next.3",
		"17.0.0-next.4",
		"17.0.0-next.5",
		"17.0.0-next.6",
		"17.0.0-next.7",
		"17.0.0-next.8",
		"17.0.0-next.9",
		"17.0.0",
		"17.0.1",
		"17.0.2",
		"17.0.3",
		"17.0.4",
		"17.0.5",
		"17.0.6",
		"17.0.7",
		"17.0.8",
		"17.0.9",
		"17.0.10",
		"17.1.0-rc.0",
		"17.1.0-rc.1",
		"17.1.0-next.0",
		"17.1.0-next.1",
		"17.1.0-next.2",
		"17.1.0-next.3",
		"17.1.0",
		"17.1.1",
		"17.1.2",
		"17.1.3",
		"17.1.4",
		"17.2.0-rc.0",
		"17.2.0-next.0",
		"17.2.0-next.1",
		"17.2.0",
		"17.2.1",
		"17.2.2",
		"17.2.3",
		"17.3.0-rc.0",
		"17.3.0",
		"17.3.1",
		"17.3.2",
		"17.3.3",
		"17.3.4",
		"17.3.5",
		"17.3.6",
		"17.3.7",
		"17.3.8",
		"17.3.9",
		"17.3.10",
		"17.3.11",
		"17.3.12",
		"17.3.13",
		"17.3.14",
		"17.3.15",
		"17.3.16",
		"17.3.17",
		"18.0.0-rc.0",
		"18.0.0-rc.1",
		"18.0.0-rc.2",
		"18.0.0-rc.3",
		"18.0.0-next.0",
		"18.0.0-next.1",
		"18.0.0-next.2",
		"18.0.0-next.3",
		"18.0.0-next.4",
		"18.0.0-next.5",
		"18.0.0",
		"18.0.1",
		"18.0.2",
		"18.0.3",
		"18.0.4",
		"18.0.5",
		"18.0.6",
		"18.0.7",
		"18.1.0-rc.0",
		"18.1.0-rc.1",
		"18.1.0-next.0",
		"18.1.0-next.1",
		"18.1.0-next.2",
		"18.1.0-next.3",
		"18.1.0",
		"18.1.1",
		"18.1.2",
		"18.1.3",
		"18.1.4",
		"18.2.0-rc.0",
		"18.2.0-next.0",
		"18.2.0-next.1",
		"18.2.0-next.2",
		"18.2.0-next.3",
		"18.2.0",
		"18.2.1",
		"18.2.2",
		"18.2.3",
		"18.2.4",
		"18.2.5",
		"18.2.6",
		"18.2.7",
		"18.2.8",
		"18.2.9",
		"18.2.10",
		"18.2.11",
		"18.2.12",
		"18.2.13",
		"18.2.14",
		"18.2.15",
		"18.2.16",
		"18.2.17",
		"18.2.18",
		"18.2.19",
		"18.2.20",
		"18.2.21",
		"19.0.0-rc.0",
		"19.0.0-rc.1",
		"19.0.0-rc.2",
		"19.0.0-rc.3",
		"19.0.0-next.0",
		"19.0.0-next.1",
		"19.0.0-next.2",
		"19.0.0-next.3",
		"19.0.0-next.4",
		"19.0.0-next.5",
		"19.0.0-next.6",
		"19.0.0-next.7",
		"19.0.0-next.8",
		"19.0.0-next.9",
		"19.0.0-next.10",
		"19.0.0-next.11",
		"19.0.0-next.12",
		"19.0.0-next.13",
		"19.0.0",
		"19.0.1",
		"19.0.2",
		"19.0.3",
		"19.0.4",
		"19.0.5",
		"19.0.6",
		"19.0.7",
		"19.1.0-rc.0",
		"19.1.0-next.0",
		"19.1.0-next.1",
		"19.1.0-next.2",
		"19.1.0",
		"19.1.1",
		"19.1.2",
		"19.1.3",
		"19.1.4",
		"19.1.5",
		"19.1.6",
		"19.1.7",
		"19.1.8",
		"19.1.9",
		"19.2.0-rc.0",
		"19.2.0-next.0",
		"19.2.0-next.1",
		"19.2.0-next.2",
		"19.2.0",
		"19.2.1",
		"19.2.2",
		"19.2.3",
		"19.2.4",
		"19.2.5",
		"19.2.6",
		"19.2.7",
		"19.2.8",
		"19.2.9",
		"19.2.10",
		"19.2.11",
		"19.2.12",
		"19.2.13",
		"19.2.14",
		"19.2.15",
		"19.2.16",
		"19.2.17",
		"19.2.18",
		"20.0.0-rc.0",
		"20.0.0-rc.1",
		"20.0.0-rc.2",
		"20.0.0-rc.3",
		"20.0.0-rc.4",
		"20.0.0-next.0",
		"20.0.0-next.1",
		"20.0.0-next.2",
		"20.0.0-next.3",
		"20.0.0-next.4",
		"20.0.0-next.5",
		"20.0.0-next.6",
		"20.0.0-next.7",
		"20.0.0-next.8",
		"20.0.0-next.9",
		"20.0.0",
		"20.0.1",
		"20.0.2",
		"20.0.3",
		"20.0.4",
		"20.0.5",
		"20.0.6",
		"20.1.0-rc.0",
		"20.1.0-next.0",
		"20.1.0-next.1",
		"20.1.0-next.2",
		"20.1.0-next.3",
		"20.1.0",
		"20.1.1",
		"20.1.2",
		"20.1.3",
		"20.1.4",
		"20.1.5",
		"20.1.6",
		"20.2.0-rc.0",
		"20.2.0-rc.1",
		"20.2.0-next.0",
		"20.2.0-next.1",
		"20.2.0-next.2",
		"20.2.0-next.3",
		"20.2.0",
		"20.2.1",
		"20.2.2",
		"20.3.0-rc.0",
		"20.3.0",
		"20.3.1",
		"20.3.2",
		"20.3.3",
		"20.3.4",
		"20.3.5",
		"20.3.6",
		"21.0.0-next.0",
		"21.0.0-next.1",
		"21.0.0-next.2",
		"21.0.0-next.3",
		"21.0.0-next.4",
		"21.0.0-next.5",
		"21.0.0-next.6",
		"21.0.0-next.7",
	}

	fmt.Println("\n=== NPM ===")

	a := AnalyzeConstraint(vars.StylePy, npmConstraints, npmVersions)
	fmt.Printf("\nRAW: %q\nPARSED: %v\nMATCHES: %v\n", a.Raw, a.Parsed, a.Matches)

	pyConstraints := ">1.1.0,<2.9.9"
	pyVersions := []string{
		"1.1.1",
		"3.0.0",
		"2.9.9",
		"2.9.0",
		"1.9.0",
		"2.8.1",
		"1.0.0",
		"2.0.0",
		"1.2.0",
		"1.0.0-alpha",
		"1.0.0-beta.1",
		"1.0.0.beta2",
	}

	fmt.Println("\n=== Python (requirements.txt style) ===")

	a = AnalyzeConstraint(vars.StylePy, pyConstraints, pyVersions)
	fmt.Printf("\nRAW: %q\nPARSED: %v\nMATCHES: %v\n", a.Raw, a.Parsed, a.Matches)
}
